{% extends "base.html.twig" %}

{% block body %}
<section style="background-color: #fff;">
  <div class="container py-5">

    <div class="row d-flex justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-6" style="position: relative">

        <div class="card chat" data-user-id="{{ app.user.id }}">
          <div class="card-header d-flex justify-content-between align-items-center p-3">
            <h5 class="mb-0">Comments</h5>
          </div>
          <div class="card-body comment-window">
               {% for message in messages %}

          {% if message.sender == app.user %}
            <div class="d-flex flex-row justify-content-end chat-message" data-message-id="{{ message.id }}">
              <div class="message-content">
                <span class="reply-to-btn"><i class="fas fa-reply"></i></span>
                <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary message-text">{{ message.text }}</p>
                
              </div>
              <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava4-bg.webp"
                alt="avatar 1" style="width: 45px; height: 100%;">
            </div>
          {% else %}
            <div class="d-flex flex-row justify-content-start mb-4 chat-message" data-message-id="{{ message.id }}">
              <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp"
                alt="avatar 1" style="width: 45px; height: 100%;">
              <div class="message-content">
                <span class="reply-to-btn"><i class="fas fa-reply"></i></span>
                <p class="small p-2 ms-3 mb-1 rounded-3 message-text" style="background-color: #f5f6f7;">{{ message.text }}</p>
              </div>
            </div>
          {% endif %}



        {% endfor %}


          </div>
          <div class="card-footer text-muted d-flex justify-content-start align-items-center p-3 form-container">
            <div class="reply-to-message" style="display: none">
              <p class="small">reply-to-message</p>
            </div>
            <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp"
              alt="avatar 3" style="width: 40px; height: 100%;">
              {{ form_start(form) }}

              {{ form_widget(form.text) }}
              <label class="ms-1 comment-btn text-muted">
                <i class="fas fa-paperclip"></i>
                <input type="file" style="display: none;" class="upload-image">
              </label>
              <a class="ms-3 comment-btn text-muted" href="#!"><i class="fas fa-smile"></i></a>
              <button id="send_message" class="ms-3 comment-btn" type="submit">Send</button>
            
              {{ form_end(form) }}

            <div class="prototypes">
              <div class="d-flex flex-row justify-content-end chat-message message-from-me-prototype">
              <div class="message-content">
                  <span class="reply-to-btn"><i class="fas fa-reply"></i></span>
                  <p class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary message-text"></p>
                  <p class="small me-3 mb-3 rounded-3 text-muted d-flex justify-content-end message-time"></p>
                </div>
                <img class="message-image" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava4-bg.webp"
                  alt="avatar 1" style="width: 45px; height: 100%;">
              </div>

              <div class="d-flex flex-row justify-content-start mb-4 chat-message message-to-me-prototype">
              
                <img class="message-image" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp"
                  alt="avatar 1" style="width: 45px; height: 100%;">
                <div class="message-content">
                  <span class="reply-to-btn"><i class="fas fa-reply"></i></span>
                  <p class="small p-2 ms-3 mb-1 rounded-3 message-text" style="background-color: #f5f6f7;"></p>
                  <p class="small ms-3 mb-3 rounded-3 text-muted message-time"></p>
                </div>
              </div>
            </div>
          </div>
        </div>

        

      </div>
    </div>

  </div>
</section>

{% endblock %}